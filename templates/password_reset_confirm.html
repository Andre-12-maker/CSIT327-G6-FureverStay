{% extends "base.html" %}
{% load static %}

{% block title %}Set New Password | FureverStay{% endblock %}

{% block content %}
<div id="resetModal" class="modal login-modal show">
  <div class="modal-content">
    <h2>Set a New Password</h2>
    <p>Please enter your new password below.</p>

    <form method="POST">
      {% csrf_token %}
      
      {# Show any non-field (global) errors #}
      {% if form.non_field_errors %}
        <ul class="errorlist">
          {% for error in form.non_field_errors %}
            <li>{{ error }}</li>
          {% endfor %}
        </ul>
      {% endif %}

      <div class="form-group">
        <label for="{{ form.new_password1.id_for_label }}">New password:</label>
        {{ form.new_password1 }}
        {% if form.new_password1.errors %}
          <ul class="errorlist">
            {% for error in form.new_password1.errors %}
              <li>{{ error }}</li>
            {% endfor %}
          </ul>
        {% else %}
          <ul class="password-hints">
            <li>Your password can’t be too similar to your personal information.</li>
            <li>It must contain at least 8 characters.</li>
            <li>It can’t be a commonly used password.</li>
            <li>It can’t be entirely numeric.</li>
          </ul>
        {% endif %}
      </div>

      <div class="form-group">
        <label for="{{ form.new_password2.id_for_label }}">Confirm new password:</label>
        {{ form.new_password2 }}
        {% if form.new_password2.errors %}
          <ul class="errorlist">
            {% for error in form.new_password2.errors %}
              <li>{{ error }}</li>
            {% endfor %}
          </ul>
        {% endif %}
      </div>

      <button type="submit" class="btn-reset">Reset Password</button>
    </form>

    {% if messages %}
      <div class="message-container">
        {% for message in messages %}
          <p class="{{ message.tags }}">{{ message }}</p>
        {% endfor %}
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
